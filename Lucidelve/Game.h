//
//  Game.h
//  Lucidelve
//
//  Created by Henry Loo on 2019-02-06.
//  Copyright Â© 2019 COMP 8051. All rights reserved.
//

#import <Foundation/Foundation.h>
#import "Enemy.h"

@class Player;
@class BaseVC;
@class Dungeon;
@class DungeonNode;

/*!
 * @brief Handle general persistent data throughout the life of the game.
 */
@interface Game : NSObject

// The time for the previous frame.
@property NSDate *lastTime;

// The time between each frame in seconds.
@property NSTimeInterval deltaTime;

// The current value of the gold button's cooldown.
// This value should be decremented every frame by deltaTime
// starting until it reaches 0.
@property float goldCooldownTimer;

// Flag for if the Shop has been unlocked.
@property bool isShopUnlocked;

// Flag for if the Rusty Sword has been bought.
@property bool isSwordBought;

// Flag for if Inventory has been unlocked.
@property bool isInventoryUnlocked;
    
// Flag for if Dungeons has been unlocked.
@property bool isDungeonsUnlocked;

// Flag for if the Golden Goose has been unlocked.
@property bool isGooseUnlocked;

// The number of upgrades purchased for the Golden Goose.
@property int numGooseUpgrades;

// The amount of gold generated by the Golden Goose.
@property int gooseAmount;

// The delay between each instance of gold generation for the Golden Goose.
@property int gooseDelay;

// The current value of the Golden Goose's gold generation cooldown.
// This value should be decremented every frame by deltaTime
// starting until it reaches 0.
@property float gooseCooldownTimer;

// Flag for if the Blacksmith has been unlocked.
@property bool isBlacksmithUnlocked;

// The number of upgrades purchased for the Blacksmith.
@property int numBlacksmithUpgrades;

// The number of heart cookies purchased from the Shop.
@property int numLifeUpgrades;

// The number of dungeons cleared so far.
@property int numDungeonsCleared;

/*!
 * @brief Return the player's data.
 * @author Henry Loo
 */
- (Player*)getPlayer;

/*!
 * @brief Change the current scene to a new specified one.
 * @author Henry Loo
 *
 * @param currentVC The view controller for the current scene.
 * @param newVC The view controller for the new scene.
 */
- (void)changeScene:(BaseVC*)currentVC newVC:(BaseVC*)newVC;

/*!
 * @brief Return the dungeon corresponding to the given level,
 * starting with index 0.
 * @author Henry Loo
 */
- (Dungeon*)getDungeon:(NSUInteger)level;

/*!
 * @brief Get the number of dungeons types.
 * @author Henry Loo
 *
 * @return The number of dungeon types.
 */
- (NSUInteger)getNumDungeons;

/*!
 * @brief Get an enemy, given its type.
 * @author Henry Loo
 *
 * @param type The enemy's type.
 *
 * @return The enemy.
 */
- (Enemy*)getEnemy:(NSString*)type;

/*!
 * @brief Update the rate of gold generation by the Golden Goose
 * based on the current number of upgrades.
 * @author Henry Loo
 */
- (void)updateGooseRate;

/*!
 * @brief Increment the player's gold by the Golden Goose's
 * amount, if the cooldown timer reaches 0.
 * @author Henry Loo
 */
- (void)updateGooseGold;

/*!
 * @brief Get the player's damage, based on their sword.
 * @author Henry Loo
 *
 * @return The amount of damage the player can deal.
 */
- (int)getSwordDamage;

@end
